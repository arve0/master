AUI().add("ntnu-toolbar-menu",function(a){a.namespace("NTNU");a.NTNU.Toolbarmenu=function(e){var d=a.one("#"+e.wrapperNodeID);var f=d.one("."+e.triggerNodeClassName);var p=d.one("."+e.overLayNodeClassName);var m=d.one("."+e.menuListClassName);var n=a.one("body");if(f&&p){var b=g(p);var j=h(p);k(node);b.set("bodyContent",m);b.render();m.plug(a.Plugin.NodeFocusManager,{descendants:"li",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"dropDownFocus",fn:function(q){return q}},circular:true});m.removeClass("aui-helper-hidden");m.swallowEvent("click");m.all("li").on("click",function(s){var r=s.currentTarget;var q=r.one("a").getAttribute("href");window.location.href=q},"down:13");m.all("li").on("mouseover",function(r){var q=r.currentTarget;q.addClass("dropDownFocus")});m.all("li").on("mouseout",function(r){var q=r.currentTarget;q.removeClass("dropDownFocus")});i(e.offsetXY[0],e.offsetXY[1]);function i(A,v,q,t){var s=A||0;var r=v||0;var u=q.getXY();var z=u[0]+s;var w=u[1]+r;t.get("boundingBox").setXY([z,w])}function c(q){q.stopPropagation();j.set("reverse",!j.get("reverse"));if(p.hasClass("aui-overlay-hidden")){f.setAttribute("aria-pressed","true");f.setAttribute("aria-expanded","true");p.setAttribute("aria-hidden","false")}else{f.setAttribute("aria-pressed","false");f.setAttribute("aria-expanded","true");p.setAttribute("aria-hidden","true")}if(e.animated){j.run();m.focusManager.focus(0)}else{m.toggle();b.toggle()}}function o(){if(f.getAttribute("aria-expanded")=="true"){j.set("reverse",true);j.run();f.setAttribute("aria-expanded","false");p.setAttribute("aria-hidden","true")}}f.on("click",c);function l(q){try{m.one(q).addClass("selected")}catch(r){a.log("no element with selector: "+q)}}function g(q){return new a.OverlayBase({boundingBox:q,bodyContent:"No templates loaded",zIndex:100,visible:true,cssClass:"wai_aria_overlay"})}function h(q){return new a.Anim({node:q,from:{height:0},reverse:true,to:{height:function(r){return r.get("scrollHeight")}},from:{height:0},easing:a.Easing.easeOut,duration:0.3})}function k(q){q.setAttribute("aria-haspopup","true");q.setAttribute("aria-expanded","false")}}}},"3.1.1",{requires:["anim","node-focusmanager","aui-node"]});